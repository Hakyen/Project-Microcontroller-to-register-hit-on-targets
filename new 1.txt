Введение	2
1	Теоретическая часть	3
2 Аналитическая часть	4
2.1 Выбор аппаратной платформы	4
2.2 Анализ предметной области	5

 
Введение
Устройство регистрации попадания пули в мишень представляет собой совокупность аппаратных и программных средств, объединенных в единую систему для выполнения заданных функций.
Данное устройство может применяться в различных организациях, занимающихся предоставлением услуг по обучению навыкам работы со стрелковым оружием.
Цель работы – Разработка устройства регистрации попадания пули в мишень на основе электро-емкостного эффекта для повышения удобства стрелка.
Задачи проекта:
1.	Проанализировать существующие решения регистрации попадания по мишени
2.	Изучить основные принципы работы с электро-емкостными датчиками
3.	Проанализировать существующие аппаратные платформы, подходящие для работы с электро-емкостными датчиками
4.	Выбрать средства программирования и аппаратную платформу
5.	Разработать информационную модель

 
1	Теоретическая часть
1.	Анализ существующих решений поставленной задачи
Существующие на рынке решения представлены устройствами, в которых регистрация попадания основана на:
1	Регистрация удара пули о металлическую мишень.
Преимущества:
•	Относительная дешевизна
•	Высокая надежность
Недостатки:
•	большое количество ложных срабатываний, вызванных рикошетом или выбросом грунта с обратной стороны мишени.
•	невозможность использовать металлические мишени в закрытых стрелковых галереях 
•	невозможность использовать металлические мишени на стрелковых полигонах длинной менее 50м
•	невозможность корректировки прицельной точки из-за отсутствия информации о примерном месте попадания
2	Регистрация попадания с использованием камер, с возможностью автоматической ориентации на поверхность мишени.
Преимущества:
•	При грамотно продуманной точке установки возможно использовать с любым типом мишеней
•	Регистрируется точка попадания, что позволяет скорректировать точку прицеливания
Недостатки:
•	Дороговизна устройства
•	Сложность и дороговизна в обслуживании
•	Сложность в установке устройства и настройке
•	Высокий риск повреждения или полного уничтожения вследствие рикошетов
•	Для определения точки попадания стрелку необходимо сфокусироваться на экране устройства, тем самым потеряв концентрацию на мишени
•	Возможные помехи на радиоканале, вызванные сторонним электрооборудованием

1.2 хз как назвать
Исходя из выше указанных преимуществ и недостатков конкурентов, были поставлены следующие требования:
1	Возможность устанавливаться в закрытых стрелковых галереях
2	Дешевизна устройства
3	Малые габариты
4	Индикация попадания без отвлечения внимания стрелка от цели
5	Предоставление стрелку о точке попадания для корректировки прицельной точки
6	Простота настройки устройства
7	Высокая ремонтопригодность
8	Возможность установки в тирах, оборудованных подвижными рельсами
9	Возможность работы с разными рисунками мишени
2 Аналитическая часть
2.1 Выбор аппаратной платформы
В качестве аппаратной платформы был выбран модуль NodeMCU ESP-12Е с характеристиками:
•	32-х битный процессор Tensilica Xtensa L106 с тактовой частотой 80MHz
•	4 мегабайта Flash памяти, часть из которой можно использовать для хранения данных, скорость доступа к которым не критична
•	Установленный на плате WiFi модуль и возможность использовать как точку доступа для удобной настройки устройства
•	Возможность использовать 11 портов ввода-вывода
•	Максимальное энергопотребление 215mAh
Сравнение с аналогами
	ESP-12E	Arduino Nano	Arduino Uno
Тактовая частота	80MHz	16MHz	16MHz
Объем flash	4Mb	16Kb	32Kb
WiFi 2.4GHz	Есть	Нет	Нет
Кол-во портов	11	22	20
EEPROM	4Kb	1Kb	1Kb
RAM	35Kb	1Kb	2Kb

 
В качестве электро-емкостных датчиков был выбран модуль TTP223:
•	невысокая стоимость
•	хорошие показатели точности измерения
•	автоматическая настройка измеряемой ёмкости при включении модуля.
Для оповещения стрелка о попадании было решено использовать RGB светодиодный блок
•	Возможность световой индикации для каждого сектора мишени
•	При регистрации попадания световая индикация оповестит пользователя о попадании без необходимости терять концентрацию на мишени
2.2 Анализ предметной области
Требуется изучить:
•	Arduino IDE
•	Библиотеку EEPROM.h для работы с энергонезависимой памятью
•	Библиотеку ESP8266WiFi.h для взаимодействия с WiFi модулем
•	Библиотеку ESP8266WebServer.h для создания web интерфейса и упрощения настройки модуля
•	Библиотеку FS.h для записи большинства частей web интерфейса в SPIFFS память
EEPROM является энергонезависимой памятью. Данный тип памяти отлично подходит для хранения переменных, которые должны сохранять свои значения при отключении питания. Есть и минусы, ячейки такой памяти рассчитаны на 100000 перезаписей. Следовательно, хранить в такой памяти удобно настройки устройства, которые пользователь в зависимости от задач сможет изменить, и после отключения питания они сохранят своё состояние. Каждая ячейка памяти имеет свой адрес и хранит 1 байт информации.
 WiFi модуль имеет возможность работать в 3-х режимах:
•	WIFI_AP – Точка доступа, в таком режиме работы может быть подключено до 5 клиентов
•	WIFI_STA – Клиент, может подключаться к любой WiFi сети в пределах досягаемости
•	WIFI_AP_STA – гибридный режим, одновременно является и клиентом и точкой доступа
Web server можно использовать для создания пользовательского интерфейса, в котором будет удобно настраивать устройство
SPIFFS память является отделом flash памяти, выделяемой под различные пользовательские файлы, доступ к которым осуществляет библиотека FS.h
2.3 Постановка задачи
Необходимо реализовать два режима работы устройства:
1.	Режим настройки устройства. В данном режиме модуль создает точку доступа WiFi, создает web интерфейс, в котором отображает текущие настройки и имеет возможность сохранить новые, записав их в EEPROM
2.	Режим обычной работы. В данном режиме модуль при включении загружает настройки из энергонезависимой памяти, исходя из полученных настроек активирует определенное количество сегментов на мишени и ведет опрос электро-емкостных датчиков, при срабатывании датчика, модуль подает световую индикацию попадания в сектор, датчик которого был активирован
3	Практическая часть

